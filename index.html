function checkPageDetails(pageId, pageToken) {
            // Show Loading Modal
            const modal = document.getElementById('details-modal');
            const content = document.getElementById('modal-content');
            modal.classList.remove('hidden');
            content.innerHTML = '<div class="text-center py-8"><div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-10 w-10 mx-auto mb-2"></div><p>Asking Facebook for data...</p></div>';

            // API Call
            FB.api('/' + pageId, {
                fields: 'name,business,monetization_products,payment_options',
                access_token: pageToken
            }, function(response) {
                // --- ERROR CATCHING (NEW) ---
                if (response.error) {
                    content.innerHTML = `
                        <div class="bg-red-100 p-4 rounded text-red-700">
                            <h3 class="font-bold">Facebook Error:</h3>
                            <p>${response.error.message}</p>
                            <p class="text-xs mt-2 text-gray-600">Code: ${response.error.code}</p>
                        </div>
                        <div class="mt-4 text-center">
                            <p class="text-sm">Please take a screenshot of this error and send it to me.</p>
                        </div>
                    `;
                    document.getElementById('modal-title').innerText = "Error Found";
                    return; // Stop here
                }
                // -----------------------------
                
                renderDetails(response);
            });
        }
